
@{
    ViewData["Title"] = "Make Transaction";
    var accounts = ViewBag.BankAccounts;
    var errorMessage = ViewBag.ErrorMessage;
}

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
<link rel="stylesheet" href="~/css/commons.css" type="text/css">

<div class="row">
    <div class="col-sm-2">
        <a asp-controller="Home" asp-action="Index"><img class="logo-img" src="~/content/images/Logo.png" /></a>
    </div>
    <div class="col-sm-10 text-center">
        <h1 class="text-center main-title">New transaction</h1>
    </div>
</div>

<partial name="_SubMenu" />

<hr />

@if (!String.IsNullOrEmpty(errorMessage))
{
    <div class="alert alert-danger" role="alert">
        @errorMessage
    </div>
}
<div class="row justify-content-center" style="padding-bottom:50px">
    <br />
    <h3 class="text-center" style="padding:30px;">Please enter the transaction details below</h3>
    <br />
    <form method="post" enctype="multipart/form-data" asp-controller="Transactions" asp-action="TransactionBetweenAccounts" class="col-sm-6">
        <div class="input-group-prepend">
            <div class="input-group-prepend">
                <label class="input-group-text" for="selectSenderIban">Sender Account</label>
            </div>
            <select class="custom-select" id="selectSenderIban" name="senderIban" required>
                <option value="" selected disabled>Choose...</option>
                @foreach (var bankAccount in accounts)
                {
                    <option value="@bankAccount.IBAN">@bankAccount.IBAN</option>
                }
            </select>
        </div>

        <label for="receiver-id">Receiver</label>
        <div class="input-group-prepend">
            <div class="input-group-prepend">
                <label class="input-group-text" for="selectSenderIban">Sender Account</label>
            </div>
            <select class="custom-select" id="selectReceiverIban" name="receiverIban" required>
                <option value="" selected disabled>Choose...</option>
                @foreach (var bankAccount in accounts)
                {
                    <option value="@bankAccount.IBAN">@bankAccount.IBAN</option>
                }
            </select>
        </div>

        <label for="transaction-amount">Transaction amount</label>
        <div class="row">
            <div class="input-group col-sm-8">
                <div class="input-group-prepend">
                    <span class="input-group-text">$</span>
                </div>
                <input name="amount" type="text" class="form-control" aria-label="Amount" required>
                <div class="input-group-prepend">
                    <select class="custom-select" id="selectCurrency" name="currency" required>
                        <option value="" selected disabled>Currency...</option>
                        <option value="RON">RON</option>
                        <option value="EUR">EUR</option>
                        <option value="USD">USD</option>
                    </select>
                </div>

                <div class="col-sm-1"></div>
                <button type="submit" class="btn btn-primary col-sm-4 ml-auto mr-auto"><i class="fas fa-paper-plane"></i>Submit</button>
            </div>
        </div>
    </form>
</div>
<script src='~/lib/chartjs/dist/Chart.bundle.js'></script>
<script src="~/js/home.js" type="text/javascript"></script>