
@{
    ViewData["Title"] = "Make Recurring Transaction";
    var accounts = ViewBag.BankAccounts;
    var errorMessage = ViewBag.ErrorMessage;
}

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
<link rel="stylesheet" href="~/css/commons.css" type="text/css">

<div class="row">
    <div class="col-sm-2">
        <a asp-controller="Home" asp-action="Index"><img class="logo-img" src="~/content/images/Logo.png" /></a>
    </div>
    <div class="col-sm-10 text-center">
        <h1 class="text-center main-title">New recurring transaction</h1>
    </div>
</div>

<partial name="_SubMenu" />

<hr />

@if (!String.IsNullOrEmpty(errorMessage))
{
    <div class="alert alert-danger" role="alert">
        @errorMessage
    </div>
}
<br />
<h3 class="text-center" style="padding:30px;">Please enter the billing details below</h3>
<br />
<div class="row justify-content-center" style="padding-bottom:50px">
    <form method="post" enctype="multipart/form-data" asp-controller="Bills" asp-action="AddRecurringTransaction" class="col-sm-6">
        <div class="input-group-prepend">
            <div class="input-group-prepend">
                <label class="input-group-text" for="selectSenderIban">Sender Account</label>
            </div>
            <select class="custom-select" id="selectSenderIban" name="senderIban" required>
                <option value="" selected disabled>Choose...</option>
                @foreach (var bankAccount in accounts)
                {
                    <option value="@bankAccount.IBAN">@bankAccount.IBAN</option>
                }
            </select>
        </div>

        <label for="receiver-id">Receiver</label>
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text" id="basic-addon3">IBAN</span>
            </div>
            <input type="text" name="receiverIban" class="form-control" id="receiver-id" aria-describedby="basic-addon3" required>
        </div>

        <label for="receiver-name">Receiver's full name (E.g. Electricity S.A.)</label>
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text" id="basic-addon3">Full name</span>
            </div>
            <input type="text" name="receiverFullName" class="form-control" id="receiver-full-name" aria-describedby="basic-addon3" required>
        </div>

        <label for="transaction-description">Transaction description</label>
        <div class="input-group">
            <div class="input-group-prepend">
                <span class="input-group-text">Description</span>
            </div>
            <textarea class="form-control" name="description" aria-label="Description" id="transaction-description" required></textarea>
        </div>

        <label for="transaction-first-payment-date">First payment date</label>
        <div class="input-group">
            <div class="input-group-prepend">
                <span class="input-group-text">First payment</span>
            </div>
            <input type="date" name="firstPaymentDate" class="form-control" id="first-payment" required>
        </div>

        <label for="transaction-last-payment-date">Last payment date</label>
        <div class="input-group">
            <div class="input-group-prepend">
                <span class="input-group-text">Last payment</span>
            </div>
            <input type="date" class="form-control" name="lastPaymentDate" id="transaction-last-payment-date" required>
        </div>

        <label for="payment-interval">*Payment interval (number of days)(if left empty will default to monthly)</label>
        <div class="input-group">
            <div class="input-group-prepend">
                <span class="input-group-text">No. of days</span>
            </div>
            <input type="text" class="form-control" name="daysInterval" id="daysInterval">
        </div>


        <label for="transaction-amount">Transaction amount</label>
        <div class="row">
            <div class="input-group col-sm-8">
                <div class="input-group-prepend">
                    <span class="input-group-text">$</span>
                </div>
                <input name="amount" type="text" class="form-control" aria-label="Amount" required>
                <div class="input-group-prepend">
                    <select class="custom-select" id="selectCurrency" name="currency" required>
                        <option value="" selected disabled>Currency...</option>
                        <option value="RON">RON</option>
                        <option value="EUR">EUR</option>
                        <option value="USD">USD</option>
                    </select>
                </div>

                <div class="col-sm-1"></div>
                <button type="submit" class="btn btn-primary col-sm-4 ml-auto mr-auto"><i class="fas fa-paper-plane"></i>Submit</button>
            </div>
        </div>
    </form>
</div>
<script src='~/lib/chartjs/dist/Chart.bundle.js'></script>
<script src="~/js/home.js" type="text/javascript"></script>